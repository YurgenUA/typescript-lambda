{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "AccommodationBaselineUnit",
  "javaType": "tui.product.function.model.baseline.accommodation.unit.AccommodationBaselineUnit",
  "description": "Accommodation baseline unit schema",
  "type": "object",
  "properties": {
    "schemaVersion": {
      "description": "Schema version this event is validated against.",
      "type": "string",
      "const": "0.2.4"
    },
    "creationTimeStamp": {
      "description": "Date and time for when the first version of this object was created.",
      "type": "string",
      "format": "date-time"
    },
    "updatedTimeStamp": {
      "description": "Date and time for when the entity was updated.",
      "type": "string",
      "format": "date-time"
    },
    "retiredTimeStamp": {
      "description": "Date and time for when the entity was retired.",
      "type": "string",
      "format": "date-time"
    },
    "baselineComponentId": {
      "description": "Reference to the component (accommodation).",
      "type": "string"
    },
    "baselineUnitId": {
      "description": "Unit ID as generated by product Service.",
      "type": "string"
    },
    "baselineUnitVersion": {
      "description": "Unit version as generated by Product Service.",
      "type": "number"
    },
    "sourcedUnitData": {
      "description": "Contains relevant information from sourcing domain.",
      "type": "object",
      "properties": {
        "contracts": {
          "type": "array",
          "minItems": 1,
          "items": {
            "$ref": "#/definitions/contract"
          }
        },
        "roomTypeId": {
          "description": "The room type id as set by sourcing (DOD).",
          "type": "string"
        },
        "roomTypeCode": {
          "description": "A human readable short code for the room. Used for wholesale with code from destimo, e.g. DO-06 etc.",
          "type": "string"
        },
        "roomTypeVersion": {
          "description": "DOD version for particular room type.",
          "type": "string"
        },
        "roomTypeName": {
          "description": "The room type name as set by sourcing (DOD).",
          "type": "string"
        },
        "sourcingCategory": {
          "description": "Indicates if source is a contracted source or dynamic.",
          "type": "string",
          "enum": [
            "CONTRACTED",
            "DYNAMIC"
          ]
        },
        "supplierRoomTypeName": {
          "description": "The room type name as set by supplier.",
          "type": "string"
        },
        "sourcingSystem": {
          "description": "Indicator of the sourcing system delivering the data to Product Service.",
          "type": "string"
        },
        "sourcedComponentId": {
          "description": "Accommodation ID as defined by Sourcing (DOD).",
          "type": "string"
        },
        "supplier": {
          "description": "Accommodation Supplier. For Dynamic accommodations it refers to specific bed bank or equal.",
          "type": "string"
        },
        "supplierRoomTypeCode": {
          "description": "Code for this roomType as defined by the supplier (only for dynamic suppliers)",
          "type": "string"
        },
        "subSupplier": {
          "description": "Subsupplier, i.e. the supplier the contract is signed with for contracted portfolio.",
          "type": "string"
        }
      },
      "required": [
        "roomTypeId",
        "roomTypeVersion",
        "roomTypeName",
        "sourcingCategory",
        "sourcedComponentId"
      ],
      "additionalProperties": false
    },
    "accommodationUnit": {
      "type": "object",
      "properties": {
        "boardTypes": {
          "description": "Available board types for this unit.",
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "object",
            "properties": {
              "id": {
                "description": "primary key of board type reference. The id is the primary key of this item within the sourcing domain.",
                "type": "string"
              },
              "code": {
                "description": "The code of the entity instance.",
                "type": "string"
              },
              "name": {
                "description": "The name of the entity instance.",
                "type": "string"
              },
              "isDefaultBoard": {
                "description": "Indicates the default board to present to customer. This does not override the base board is aspect of cost calculation.",
                "type": "boolean"
              },
              "validDateBands": {
                "description": "Date bands when this board type is available. If parameter not set it's valid same period as the units travel period (which is seen as the parent date band). The date bands will never be outside of unit stayCondition but may be reduced vs it.",
                "type": "array",
                "minItems": 1,
                "items": {
                  "$ref": "#/definitions/dateBand"
                }
              },
              "rank": {
                "description": "Ranks the board types vs each other. i.e. Half Board is more than Bed & Breakfast etc",
                "type": "number"
              }
            },
            "required": [
              "id"
            ],
            "additionalProperties": false
          }
        },
        "occupancy": {
          "description": "Holds information about occupancy - min, max and normal. This is mandatory for contracted units but may be omitted for dynamic units.",
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "object",
            "properties": {
              "maxPax": {
                "description": "The maximum number of passengers (pax max) for the room type including extra beds.",
                "type": "number"
              },
              "minPax": {
                "description": "The minimum number of passengers (pax min) for the room type.",
                "type": "number"
              },
              "paxNom": {
                "description": "The nominal number of passengers (pax nom) for the room type.",
                "type": "number"
              },
              "infantAllowance": {
                "description": "OVER = Infants allowed over max occupancy. UP_TO  = Infants allowed up to max occupancy. EXCL = Infants not allowed.",
                "type": "string",
                "enum": [
                  "UP_TO",
                  "OVER",
                  "EXCLUDED"
                ]
              },
              "maxAdults": {
                "description": "Maximum number of adult passengers for the room type.",
                "type": "number"
              },
              "minAdults": {
                "description": "Minimum number of adult passengers for the room type.",
                "type": "number"
              },
              "adultAgeBand": {
                "$ref": "#/definitions/ageBand"
              },
              "maxChildren": {
                "description": "Maximum number of children for the room type.",
                "type": "number"
              },
              "minChildren": {
                "description": "Minimum number of children for the room type.",
                "type": "number"
              },
              "childAgeBand": {
                "$ref": "#/definitions/ageBand"
              },
              "maxInfants": {
                "description": "The maximum no of infants in relation to the infant allowance.",
                "type": "number"
              },
              "minInfants": {
                "description": "The minimum no of infants in relation to the infant allowance.",
                "type": "number"
              },
              "infantAgeBand": {
                "$ref": "#/definitions/ageBand"
              },
              "restrictions": {
                "description": "Placeholder for occupancy restrictions. I.e. which combinations of adults and children are not allowed, e.g. due to the characteristics of the extra beds - large, small etc.",
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "adult": {
                      "description": "The number of adults not allowed under this circumstance.",
                      "type": "number"
                    },
                    "child": {
                      "description": "The number of children not allowed in combination with the adults for this number of people in the room.",
                      "type": "number"
                    },
                    "maxOcc": {
                      "description": "Indicates which total occupancy of the room type the restriction is applicable to, i.e. number of people in the room.",
                      "type": "number"
                    }
                  },
                  "required": [
                    "adult",
                    "child",
                    "maxOcc"
                  ],
                  "additionalProperties": false
                }
              },
              "validDateBand": {
                "$ref": "#/definitions/dateBand"
              }
            },
            "required": [
              "maxPax",
              "minPax"
            ],
            "additionalProperties": false
          }
        },
        "roomType": {
          "description": "Classification of a set of individual rooms having the same attributes/ properties/ facilities (normally meant within the same accommodation). E.g. DoubleRoom, JuniorSuit etc.",
          "type": "object",
          "properties": {
            "id": {
              "description": "Reference to room type provided by DestiOpenData (uuid + version). In general, primary key of this item within the domain. The primary key does only appear once (is unique) within this domain. If the content/payload of an item changes, a new version of this item is created. An item state (id + version) is always immutable and can, therefore, be cached by the client for its own needs. The id of an item is to be kept consistent and in sync across all stages, it is used in.",
              "type": "string"
            },
            "code": {
              "type": "string"
            },
            "name": {
              "type": "string"
            },
            "description": {
              "type": "string"
            }
          },
          "required": [
            "id"
          ],
          "additionalProperties": false
        },
        "bedroomCount": {
          "description": "Number of bedrooms in this room type.",
          "type": "number"
        },
        "roomViewsTypes": {
          "description": "Lists the different view types the room has including measure type and dateband the view is valid for if such. E.g. ViewType \"Sea View\", with measure type \"direct\".",
          "type": "array",
          "minItems": 1,
          "items": {
            "$ref": "#/definitions/viewType"
          }
        },
        "attributes": {
          "description": "The attribute types applicable for the room type. e.g. BedType, BathroomType, RoomViewType etc.",
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "id": {
                "description": "ID for this attribute as defined by DOD.",
                "type": "string"
              },
              "code": {
                "description": "Code for this attribute as defined by DOD.",
                "type": "string"
              },
              "name": {
                "description": "Name of the attribute. Default from DOD but can be overridden by product service.",
                "type": "string"
              },
              "description": {
                "description": "Description for this attribute as defined by DOD. Can be overridden by Product Service.",
                "type": "string"
              },
              "type": {
                "type": "string"
              },
              "subType": {
                "description": "The attribute subType as defined by DOD. e.g. for Attribute Sofa Type is \"bedType\" and subType is \"SecondaryBed\".",
                "type": "string"
              },
              "validDateBands": {
                "description": "Valid date bands for this entity. This cannot go beyond the dates of the product/parent but can be reduced for this concept and hence overrides parent dates for this specific entity. If parameter not set it's valid same period as parent object (or product if no limitation exists on parent).",
                "type": "array",
                "minItems": 1,
                "items": {
                  "$ref": "#/definitions/dateBand"
                }
              }
            },
            "required": [
              "id",
              "name",
              "type"
            ],
            "additionalProperties": false
          }
        },
        "stayConditions": {
          "description": "Date bands showing when customer can utilize this unit. The date bands can go beyond a specific products travel period. For that product the product dates will override. So for specific product only dates valid also on product level is valid and if the stayCondition have restrictions within that period the restriction shall be applied for this unit. Mandatory for contracted units but not for dynamic. If omitted the dates on product level rules when applied.",
          "type": "array",
          "minItems": 1,
          "items": {
            "$ref": "#/definitions/dateBand"
          }
        },
        "stayDurationConditions": {
          "description": "Array of dateBands with corresponding valid stayDurations. If only one Item then ValidDateBand may be omitted which implies that it's same as stayCondition. Mandatory for contracted units but not for dynamic.",
          "type": "array",
          "minItems": 1,
          "items": {
            "description": "Date band with Number of nights customer can utilize the Unit during that period. In specific number of nights (e.g. 7 and 14). At least one stayDurationBand OR one atomicStayDuration WILL ALWAYS be set.",
            "type": "object",
            "properties": {
              "stayDurationBands": {
                "description": "Defines an spans of valid stay durations (nbr of nights)",
                "type": "array",
                "items": {
                  "description": "Defines an span of valid stay durations (nbr of nights), e.g from 3 to 14",
                  "type": "object",
                  "properties": {
                    "from": {
                      "description": "start of the valid stay duration (nbr of nights) span",
                      "type": "number"
                    },
                    "to": {
                      "description": "end of the valid stay duration (nbr of nights) span",
                      "type": "number"
                    }
                  },
                  "additionalProperties": false
                }
              },
              "atomicStayDurations": {
                "description": "Defines one or more valid atomic stay durations (nbr of nights).",
                "type": "array",
                "minItems": 0,
                "items": {
                  "description": "An atomic valid stay duration (nbr of nights)",
                  "type": "number"
                }
              },
              "defaultStayDuration": {
                "description": "Indicates the default stay duration to use in certain sales presentations.",
                "type": "number"
              },
              "validDateBand": {
                "$ref": "#/definitions/dateBand"
              }
            },
            "additionalProperties": false
          }
        },
        "arrivalWeekDays": {
          "$ref": "#/definitions/weekDaysConditions"
        },
        "departureWeekDays": {
          "$ref": "#/definitions/weekDaysConditions"
        }
      },
      "required": [
        "roomType",
        "arrivalWeekDays",
        "departureWeekDays"
      ],
      "additionalProperties": false
    },
    "termsAndConditions": {
      "description": "Terms and conditions from contract.",
      "type": "array",
      "minItems": 0,
      "items": {
        "type": "object"
      }
    }
  },
  "required": [
    "creationTimeStamp",
    "baselineComponentId",
    "baselineUnitId",
    "baselineUnitVersion",
    "sourcedUnitData",
    "accommodationUnit"
  ],
  "additionalProperties": false,
  "definitions": {
    "dateBand": {
      "description": "For contracted units the start and end dates are mandatory if there is a date band. For dynamic accommodations it is optional and if included it can have just a start date or just an end date or both.",
      "type": "object",
      "minProperties": 1,
      "properties": {
        "startDate": {
          "description": "The date from which entity is valid.",
          "type": "string",
          "format": "date"
        },
        "endDate": {
          "description": "The date to which the entity is valid.",
          "type": "string",
          "format": "date"
        }
      },
      "additionalProperties": false
    },
    "ageBand": {
      "description": "Age band defining what ages are used to define a specific occupancy age type.",
      "type": "object",
      "properties": {
        "maxAge": {
          "description": "Maximum age of the age band.",
          "type": "number"
        },
        "minAge": {
          "description": "Minimum age of the age band.",
          "type": "number"
        }
      },
      "required": [
        "maxAge",
        "minAge"
      ],
      "additionalProperties": false
    },
    "weekDaysConditions": {
      "description": "Days of the week when customers are allowed to have their first stay night or week day when allowed to departure.",
      "type": "array",
      "minItems": 1,
      "items": {
        "description": "Week days condition.",
        "type": "object",
        "properties": {
          "weekDays": {
            "description": "Days of the week when customers are allowed to have their first stay night or will departure from the accommodaiton.",
            "type": "array",
            "minItems": 1,
            "items": {
              "description": "WeekDay.",
              "type": "string",
              "enum": [
                "MONDAY",
                "TUESDAY",
                "WEDNESDAY",
                "THURSDAY",
                "FRIDAY",
                "SATURDAY",
                "SUNDAY"
              ]
            }
          },
          "validDateBand": {
            "$ref": "#/definitions/dateBand"
          }
        },
        "required": [
          "weekDays"
        ],
        "additionalProperties": false
      }
    },
    "viewType": {
      "type": "object",
      "properties": {
        "viewTypeId": {
          "description": "Id of the view type as defined by DOD (Product can change view type but only to an other DOD view type).",
          "type": "string"
        },
        "viewTypeCode": {
          "description": "code of the view type as defined by accommodation sourcing.",
          "type": "string"
        },
        "viewTypeName": {
          "description": "Name of the view type as defined by DOD.",
          "type": "string"
        },
        "nameOfPOI": {
          "description": "Name of POI supports free text field available in acco sourcing. E.g. ViewType \"POI\" nameOfPOI \"Eiffel tower\".",
          "type": "string"
        },
        "viewMeasureType": {
          "$ref": "#/definitions/viewMeasureType"
        },
        "validDateBand": {
          "$ref": "#/definitions/dateBand"
        }
      },
      "required": [
        "viewTypeId",
        "viewTypeName"
      ],
      "additionalProperties": false
    },
    "viewMeasureType": {
      "description": "View measure type indicate if it is for example a direct view or a side view etc. This is mandatory for contracted rooms but optional for dynamic.",
      "type": "object",
      "properties": {
        "id": {
          "description": "View measure type id as defined by DOD (Product can change view measure type but only to an other DOD view measure type).",
          "type": "string"
        },
        "code": {
          "description": "Code of the view measure type as defined by accommodation sourcing.",
          "type": "string"
        },
        "name": {
          "description": "View measure type name as defined by DOD. ",
          "type": "string"
        }
      },
      "required": [
        "id",
        "name"
      ],
      "additionalProperties": false
    },
    "contract": {
      "type": "object",
      "properties": {
        "contractedUnitId": {
          "description": "Primary key of this contracted unit. The identifier to resolve which contracted unit this product unit is based on. IF dynamic unit this holds the suppliers room identifier",
          "type": "string"
        },
        "contractedUnitVersion": {
          "description": "Version of contracted unit.",
          "type": "string"
        },
        "contractBusinessKey": {
          "description": "Contract businessKey as defined by sourcing.",
          "type": "string"
        },
        "contractVersion": {
          "description": "Sourcing description: The version identifier part enables an item to have multiple versions. This allows different systems to have different states about the same fact. Even though version field is in general specified as a string text field without clear format, we prefer to apply ISO8601 to be able to specify a version on millisecond basis to order them and make several versions easily comparable. (CKGA3).",
          "type": "string"
        },
        "contractCode": {
          "description": "Presumably deprecated in Acco sourcing unit 2.0. Waiting with removal until Unit 2.0 is finalized.",
          "type": "string"
        },
        "contractStatus": {
          "description": "Status of the contract from accommodation sourcing. ",
          "type": "string",
          "enum": [
            "ESTIMATE",
            "SIGNED",
            "CANCELLED"
          ]
        },
        "validDateBand": {
          "$ref": "#/definitions/dateBand"
        },
        "sourceMarkets": {
          "description": "All source markets this Product is valid for.",
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "object",
            "description": "Source market and it's brands. If no brands specified - we assume all available brands are valid.",
            "properties": {
              "code": {
                "type": "string",
                "description": "Code identifying this source market."
              },
              "brands": {
                "description": "All brands under source market this Product is valid for.",
                "type": "array",
                "minItems": 1,
                "items": {
                  "type": "string",
                  "description": "Code identifying this bramd."
                }
              }
            },
            "required": [
              "code"
            ]
          }
        }
      },
      "required": [
        "contractedUnitId",
        "contractedUnitVersion",
        "contractStatus"
      ],
      "additionalProperties": false
    }
  }
}
