{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "description": "Accommodation baseline component schema",
  "title": "AccommodationBaselineComponent",
  "javaType": "tui.product.function.model.baseline.accommodation.component.AccommodationBaselineComponent",
  "type": "object",
  "properties": {
    "schemaVersion": {
      "description": "Schema version this event is validated against.",
      "type": "string",
      "const": "0.2.4"
    },
    "creationTimeStamp": {
      "description": "Date and time for when the first version of this object was created.",
      "type": "string",
      "format": "date-time"
    },
    "updatedTimeStamp": {
      "description": "Date and time for when the entity was updated.",
      "type": "string",
      "format": "date-time"
    },
    "retiredTimeStamp": {
      "description": "Date and time for when the entity was retired.",
      "type": "string",
      "format": "date-time"
    },
    "baselineComponentId": {
      "description": "ComponentID as generated by product Service.",
      "type": "string"
    },
    "baselineComponentVersion": {
      "description": "Component version generated by product service.",
      "type": "number"
    },
    "sourcedComponentData": {
      "type": "object",
      "properties": {
        "id": {
          "description": "Accommodation ID as defined by Sourcing (DOD).",
          "type": "string"
        },
        "code": {
          "description": "Accommodation Code as defined by Sourcing (DOD).",
          "type": "string"
        },
        "version": {
          "description": "Accommodation version as defined by Sourcing (DOD).",
          "type": "string"
        },
        "sourcingSystem": {
          "description": "Sourcing system providing the data to Product Service.",
          "type": "string"
        },
        "suppliers": {
          "description": "Lists the suppliers that provides this component.",
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "supplierName": {
                "description": "Name of the supplier.",
                "type": "string"
              },
              "supplierCode": {
                "description": "Short code for the supplier.",
                "type": "string"
              },
              "supplierComponentCode": {
                "description": "The identifier of this accommodation according to supplier (bedbank etc).",
                "type": "string"
              }
            },
            "required": [
              "supplierName",
              "supplierCode",
              "supplierComponentCode"
            ]
          }
        }
      },
      "required": [
        "id",
        "code",
        "version"
      ],
      "additionalProperties": false
    },
    "accommodationComponent": {
      "type": "object",
      "properties": {
        "componentType": {
          "description": "The type of component. E.g. Villa, Hotel, Bungalow village etc.",
          "type": "object",
          "properties": {
            "id": {
              "description": "Id of the component type (from DOD).",
              "type": "string"
            },
            "name": {
              "description": "Name of the component type (from DOD).",
              "type": "string"
            }
          },
          "required": [
            "id"
          ],
          "additionalProperties": false
        },
        "names": {
          "description": "Name or names of the accommodation by date band as set by product. Date periods can go beyond specific product travel period and is then restricted by the products travel period when applied for that product.",
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "description": "Name of the accommodation as set by product.",
                "type": "string"
              },
              "validDateBand": {
                "$ref": "#/definitions/dateBand"
              }
            },
            "required": [
              "name"
            ],
            "additionalProperties": false
          }
        },
        "coordinates": {
          "type": "object",
          "properties": {
            "longitude": {
              "type": "string"
            },
            "latitude": {
              "type": "string"
            }
          },
          "required": [
            "longitude",
            "latitude"
          ],
          "additionalProperties": false
        },
        "chains": {
          "description": "Used to indicate if the accommodation is part of a hotel chain. With date bands to allow chain change. Date periods can go beyond specific product travel period and is then restricted by the products travel period when applied for that product.",
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "object",
            "properties": {
              "id": {
                "description": "Id of this entity (from DOD).",
                "type": "string"
              },
              "name": {
                "description": "The name of the entity instance.",
                "type": "string"
              },
              "validDateBand": {
                "$ref": "#/definitions/dateBand"
              }
            },
            "required": [
              "id"
            ],
            "additionalProperties": false
          }
        },
        "officialClassifications": {
          "description": "Official classification (rating). Not touched by product. Example: 3.5 representing three and a half star. With date bands to allow classification change. Date periods can go beyond specific product travel period and is then restrictid by the products travel period when applied for that product. ",
          "type": "array",
          "minItems": 1,
          "items": {
            "$ref": "#/definitions/classification"
          }
        },
        "concepts": {
          "description": "Placeholder for concepts applicable for the component including any constraints. There can only be one valid in a particular point in time.",
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "object",
            "properties": {
              "id": {
                "description": "The public id of the particular object.",
                "type": "string"
              },
              "code": {
                "description": "The code for the particular object.",
                "type": "string"
              },
              "name": {
                "description": "The name of the entity instance.",
                "type": "string"
              },
              "validDateBands": {
                "description": "Valid date bands for this entity. Date periods can go beyond specific product travel period and is then restricted by the products travel period when applied for that product.",
                "type": "array",
                "minItems": 1,
                "items": {
                  "type": "object",
                  "properties": {
                    "startDate": {
                      "description": "The date from which this is valid.",
                      "type": "string",
                      "format": "date"
                    },
                    "endDate": {
                      "description": "The date to which this is valid.",
                      "type": "string",
                      "format": "date"
                    }
                  },
                  "required": [
                    "startDate",
                    "endDate"
                  ],
                  "additionalProperties": false
                }
              }
            },
            "required": [
              "id",
              "validDateBands"
            ],
            "additionalProperties": false
          }
        },
        "attributes": {
          "description": "Attributes for this specific component.",
          "type": "array",
          "minItems": 0,
          "items": {
            "type": "object",
            "properties": {
              "id": {
                "description": "DoD id for this attribute.",
                "type": "string"
              },
              "code": {
                "description": "DOD code for this attribute.",
                "type": "string"
              },
              "name": {
                "description": "Name of the attribute. Default from DOD but can be overridden by product service.",
                "type": "string"
              },
              "description": {
                "description": "Description for this attribute as defined by DOD. Can be overridden by Product Service.",
                "type": "string"
              },
              "type": {
                "description": "The attribute type as defined by DOD.",
                "type": "string"
              },
              "subType": {
                "description": "The attribute subType as defined by DOD.",
                "type": "string"
              },
              "validDateBands": {
                "description": "Valid date bands for this entity. Date periods can go beyond specific product travel period and is then restricted by the products travel period when applied for that product.",
                "type": "array",
                "minItems": 1,
                "items": {
                  "$ref": "#/definitions/dateBand"
                }
              }
            },
            "required": [
              "id",
              "name",
              "type"
            ],
            "additionalProperties": false
          }
        }
      },
      "required": [
        "names",
        "componentType",
        "officialClassifications"
      ],
      "additionalProperties": false
    }
  },
  "required": [
    "creationTimeStamp",
    "baselineComponentId",
    "baselineComponentVersion",
    "sourcedComponentData",
    "accommodationComponent"
  ],
  "additionalProperties": false,
  "definitions": {
    "dateBand": {
      "description": "Date limits or period this entity is valid for. Can be just a start date or just an end date or both. If omitted the product for the specific use sets the date rules.",
      "type": "object",
      "minProperties": 1,
      "properties": {
        "startDate": {
          "description": "The date from which this is valid.",
          "type": "string",
          "format": "date"
        },
        "endDate": {
          "description": "The date to which this is valid.",
          "type": "string",
          "format": "date"
        }
      },
      "additionalProperties": false
    },
    "classification": {
      "description": "A classification (rating) which can be defined for a specific date period or with dates omitted if the classification (max 1) have not current end date.",
      "type": "object",
      "properties": {
        "id": {
          "description": "Id of this entity (from DOD).",
          "type": "string"
        },
        "value": {
          "description": "The value of the entity instance. Example: 3.5 representing three and a half star or TTT+.",
          "type": "number"
        },
        "validDateBand": {
          "$ref": "#/definitions/dateBand"
        }
      },
      "required": [
        "id"
      ],
      "additionalProperties": false
    }
  }
}
